// src/define-props-refs.ts
var import_language_core = require("@volar/language-core");
var plugin = ({ vueCompilerOptions }) => {
  vueCompilerOptions.macros.defineProps.push("definePropsRefs");
  return {
    name: "vue-macros-define-props-refs",
    version: 1,
    resolveEmbeddedFile(fileName, sfc, embeddedFile) {
      var _a;
      if (embeddedFile.kind !== import_language_core.FileKind.TypeScriptHostFile || !((_a = sfc.scriptSetup) == null ? void 0 : _a.content.includes("definePropsRefs")))
        return;
      try {
        rewriteImports(embeddedFile);
      } catch {
      }
    }
  };
};
function rewriteImports(file) {
  const idx = file.content.indexOf(
    `const { defineProps, defineEmits, defineSlots, defineModel, defineOptions, withDefaults } = await import('vue');
`
  );
  if (idx === -1)
    return;
  file.content[idx] = `const { defineProps, defineEmits, defineSlots, defineModel, defineOptions } = await import('vue');
`;
}
module.exports = plugin;
